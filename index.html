<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ðŸŽ¬ Watch Free Movies</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
      margin: 0;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .search-box {
      text-align: center;
      margin-bottom: 30px;
    }
    .search-box input {
      padding: 10px;
      width: 300px;
      border-radius: 5px;
      border: none;
      font-size: 16px;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    .card {
      background: #222;
      border-radius: 10px;
      overflow: hidden;
      width: 300px;
      text-align: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }
    .card img {
      width: 100%;
      height: 170px;
      object-fit: cover;
    }
    .card h3 {
      margin: 10px 0;
    }
    .watch-btn {
      display: inline-block;
      background: #e50914;
      color: white;
      padding: 10px 20px;
      margin-bottom: 15px;
      text-decoration: none;
      border-radius: 5px;
    }
    iframe {
      width: 100%;
      height: 300px;
      border: none;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<h1>ðŸŽ¬ Watch Free Movies</h1>

<div class="search-box">
  <input type="text" id="search" placeholder="Search for a movie..." onkeyup="filterMovies()">
</div>

<div class="grid" id="movie-grid"></div>

<script>
  const monetagLink = "https://embeddedoxide.com/tg912k0d?key=4f8c6307db932bdbe050ad387d46c7a0"; // replace with your Monetag link

  const movies = [
    {
      id: 1,
      title: "Avengers: Endgame",
      ytId: "TcMBFSGVi1c"
    },
    {
      id: 2,
      title: "Inception",
      ytId: "8hP9D6kZseM"
    },
    {
      id: 3,
      title: "Interstellar",
      ytId: "zSWdZVtXT7E"
    },
    {
      id: 4,
      title: "The Batman",
      ytId: "mqqft2x_Aa4"
    },
    {
      id: 5,
      title: "Oppenheimer",
      ytId: "uYPbbksJxIg"
    }
    // Add more movies
  ];

  const container = document.getElementById("movie-grid");
  const params = new URLSearchParams(window.location.search);
  const shouldPlay = params.get("play") === "1";
  const movieId = parseInt(params.get("movie"));

  if (shouldPlay && movieId) {
    const movie = movies.find(m => m.id === movieId);
    if (movie) {
      container.innerHTML = `
        <div class="card" style="width:90%; margin: 0 auto;">
          <h2>${movie.title}</h2>
          <iframe src="https://www.youtube.com/embed/${movie.ytId}?autoplay=1" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
      `;
    } else {
      container.innerHTML = "<p>Movie not found.</p>";
    }
  } else {
    // Show movie list
    movies.forEach(movie => {
      container.innerHTML += `
        <div class="card movie-item" data-title="${movie.title.toLowerCase()}">
          <img src="https://img.youtube.com/vi/${movie.ytId}/mqdefault.jpg" alt="${movie.title}">
          <h3>${movie.title}</h3>
          <a class="watch-btn" href="#" onclick="handleWatch(${movie.id}); return false;">â–¶ Watch Now</a>
        </div>
      `;
    });
  }

  function handleWatch(id) {
    const alreadySeenAd = sessionStorage.getItem("seenMonetag");
    if (alreadySeenAd) {
      window.location.href = `?play=1&movie=${id}`;
    } else {
      sessionStorage.setItem("seenMonetag", "true");
      window.location.href = `${monetagLink}?redirect=?play=1&movie=${id}`;
    }
  }

  function filterMovies() {
    const search = document.getElementById("search").value.toLowerCase();
    const items = document.querySelectorAll(".movie-item");
    items.forEach(item => {
      item.style.display = item.dataset.title.includes(search) ? "block" : "none";
    });
  }
</script>

</body>
</html>
